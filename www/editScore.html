<!--Spec
  editScore.html では、楽譜データを１小節ずつ編集する画面を表示する。
  index.html からは、楽譜データのコピーを受け取ること。
  <Back を選択したら編集を無かったことにするので、保存しないで index.htmlに戻る。
  Done を選択したら、その時に初めて編集結果をLocalStrageに保存して、楽譜データを index.html に返し編集を完了する。
-->
<!doctype html>
<html>
<head>

  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="keywords" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#111111">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="B.Click">
  <meta name="mobile-web-app-capable" content="yes">

  <title>B.Click - スコア再生</title>
  <link rel="icon" type="image/png" sizes="16x16"   href="/assets/icons/BClick-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32"   href="/assets/icons/BClick-32x32.png">
  <link rel="icon" type="image/png" sizes="64x64"   href="/assets/icons/BClick-64x64.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/assets/icons/BClick-128x128.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/assets/icons/BClick-256x256.png">

  <link rel="stylesheet" href="/assets/css/app.css">
  <link rel="stylesheet" href="/assets/css/tempoDial.css">
  <link rel="stylesheet" href="/assets/css/click.css">
  <link rel="stylesheet" href="/assets/css/editScore.css">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

  <script type="module" src="/assets/lib/Language.js"></script>

  <script type="module" src="/assets/js/click.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/alphaTab.min.js"></script>
  <script type="module" src="/assets/js/editScore.js"></script>
</head>

<!--Spec 作成した楽譜を編集やクリック音の再生をする画面
・Backは、設定を保存せずに画面遷移する。Doneは、設定を保存して画面遷移する。
・１小節ずつ編集する機能もある。
・クリック音の再生中に、BPMを変更することでクリック音の速度を変更可能。
-->

<body>
  <header>
    <button type="button" id="backShowScore" class="okConfig" aria-label="戻る">
      <span class="navChevron" aria-hidden="true">&lsaquo;</span>
      <span class="navLabel">Back</span>
    </button>
    <div id="title">B.Click</div>
    <button type="button" id="saveShowScore" class="okConfig" aria-label="保存して戻る">Done</button>
    <!-- editScore.html は必ず編集操作になるので、閉じるボタンによる編集無効のボタンは不要
    <button id="closePage" type="button" aria-label="閉じる">×</button>
    -->
  </header>
  <main>

    <!-- ここに テンポ（30～240）のBPMダイアルを用意する
    ・クリック音の再生中にテンポを変更すると、クリック音の再生スピードが、変更したテンポになる。
    -->
    <div class="preferenceTitle">
      <span class="material-symbols-outlined" aria-hidden="true">speed</span>
      テンポ（30～240）
    </div>

    <div id="beatPreference" class="tempoControl tempoControlStack">
      <div class="tempoValueGroup tempoValueTop">
        <div class="tempoStepSwitch">
          <span class="tempoInputNote">♪=</span>
          <input type="number" id="tempoInput" class="tempoInputLarge" min="30" max="240" value="60" inputmode="numeric">

          <!--Spec editScore.htmlのテンポの特殊仕様
          ・ここに <div class="tempoDialRow"> の表示をON/OFF切り替えられるスイッチを用意する。初期値はOFFで表示しない。
          ・スイッチの見た目は、index.html の <input type="checkbox" id="scoreToggle"> と同じ見た目。
          ・文字は OFF と DIAL （ONの代わり） を表示して。ON場合は少し濃い緑色を使う。
          -->
          <div class="preferenceValue preferenceValueCentered tempoDialToggleControl">
            <label class="tempoDialToggleLabel" for="tempoDialToggle">ダイヤル</label>
            <label class="scoreToggle">
              <input type="checkbox" id="tempoDialToggle" aria-label="テンポダイヤルの表示切り替え">
            </label>
          </div>

        </div>
      </div>

      <div class="tempoDialRow" id="tempoDialRow" role="group" aria-label="テンポ変更モード">
        <button type="button" id="tempoStepCoarse" class="tempoStepButton" data-step="10" aria-pressed="false">±10</button>
        <button type="button"
          class="tempoDial"
          id="tempoDial"
          data-step="10"
          data-degrees-per-step="36"
          aria-label="テンポを10ずつ変更">
          <span class="tempoDialSide tempoDialMinus" aria-hidden="true">-</span>
          <span class="tempoDialIndicator" aria-hidden="true"></span>
          <span class="tempoDialLabel">10</span>
          <span class="tempoDialSide tempoDialPlus" aria-hidden="true">+</span>
        </button>
        <button type="button" id="tempoStepFine" class="tempoStepButton isActive" data-step="1" aria-pressed="true">±1</button>
      </div>
    </div>

    <div class="preferenceTitle">
      Play
    </div>

    <div id="playClicking">
      <button id="startClick" type="button" aria-label="再生">
        <span class="material-symbols-outlined" aria-hidden="true">play_arrow</span>
      </button>
      <button id="stopClickart" type="button" aria-label="一時停止">
        <span class="material-symbols-outlined" aria-hidden="true">pause</span>
      </button>
      <button id="resetClickart" type="button" aria-label="リセット">
        <span class="material-symbols-outlined" aria-hidden="true">restart_alt</span>
      </button>
      <button id="showCodeDiagram" type="button">
        <span class="material-symbols-outlined" aria-hidden="true">back_hand</span>
        コード
      </button>
    </div>

    <div id="scorePane">
      <div id="countdownOverlay" aria-hidden="true" hidden>
        <div id="countdownText" aria-live="polite"></div>
      </div>

      <div id="showClick">
        <!-- (ここにクリックが表示されます) -->
      </div>

      <div id="scoreArea">
        <!-- (ここにリズム譜が表示されます) -->
        <div id="score" aria-label="2小節の楽譜"></div>
      </div>
    </div>

  </main>

  <footer>
    <small>&copy; 2025 tatsu. All rights reserved.</small>
  </footer>

</body>
</html>
