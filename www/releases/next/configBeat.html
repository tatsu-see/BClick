<!--Spec
  楽譜データのテンポなどを設定する画面
  <Back を選択したら編集を無かったことにするので、保存しないで index.htmlに戻る。
  Done を選択したら、その時に初めて編集結果をLocalStrageに保存して編集を完了する。
-->
<!doctype html>
<html translate="no">
<head>

  <meta charset="utf-8">
  <meta name="robots" content="noindex">
  <meta name="description" content="">
  <meta name="keywords" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#111111">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="B.Click">
  <meta name="mobile-web-app-capable" content="yes">

  <title>B.Click - Tempo Settings / テンポ設定</title>
  <link rel="icon" type="image/png" sizes="16x16"   href="assets/icons/BClick-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32"   href="assets/icons/BClick-32x32.png">
  <link rel="icon" type="image/png" sizes="64x64"   href="assets/icons/BClick-64x64.png">
  <link rel="icon" type="image/png" sizes="128x128" href="assets/icons/BClick-128x128.png">
  <link rel="icon" type="image/png" sizes="256x256" href="assets/icons/BClick-256x256.png">

  <link rel="stylesheet" href="assets/lib/Language.css">
  <link rel="stylesheet" href="assets/css/app.css">
  <link rel="stylesheet" href="assets/css/tips.css">
  <link rel="stylesheet" href="assets/css/tempoDial.css">
  <link rel="stylesheet" href="assets/css/configBeat.css">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">

  <link rel="modulepreload" href="assets/js/utils/navigationGuard.js">
  <link rel="modulepreload" href="assets/lib/consentManager.js">
  <link rel="modulepreload" href="assets/lib/consentTracking.js">
  <link rel="modulepreload" href="assets/js/actions/tips.js">

  <script type="module" src="assets/lib/Language.js"></script>
  <script type="module" src="assets/lib/consentTracking.js"></script>

  <script type="module" src="assets/js/actions/tips.js"></script>
  <script type="module" src="assets/js/pages/configBeat.js"></script>
</head>

<!--Spec クリック音に関する設定画面
・Backは、設定を保存せずに画面遷移する。Doneは、設定を保存して画面遷移する。
-->

<body>
  <header>
    <button type="button" id="saveConfigBeat" class="okConfig" aria-label="Back">
      <span class="navChevron" aria-hidden="true">&lsaquo;</span>
      <span class="navLabel">Back</span>
    </button>
    <div id="title" class="titleStack">
      <span class="titleMain"><img src="assets/icons/B.png" alt="B" class="titleIcon">.Click</span>
      <span class="titleSubtitle">— play daily, play better —</span>
    </div>
    <button id="closePage" type="button" aria-label="Save and back">Done</button>
  </header>

  <main class="pageFrame">

    <div class="preferenceTitleWithTip">
      <div class="preferenceTitle">
        <span class="material-symbols-rounded" aria-hidden="true">speed</span>
        <span class="lang" data-lang="en">Tempo (30–240)</span>
        <span class="lang" data-lang="ja">テンポ（30～240）</span>
      </div>
      <button
        type="button"
        class="chipButton tipButton"
        aria-label="Open tips"
        data-tip-target="tempoTipsDialog"
      >
        ?
      </button>
    </div>

    <div id="beatPreference" class="tempoControl tempoControlStack">
      <div class="tempoValueGroup tempoValueTop">
        <div class="tempoStepSwitch">
          <span class="tempoInputNote">♪=</span>
          <input type="number" id="tempoInput" class="tempoInputLarge" min="30" max="240" value="60" inputmode="numeric" readonly>
        </div>
      </div>

      <div class="tempoDialRow" role="group" aria-label="Tempo change mode">
        <button type="button" id="tempoStepCoarse" class="tempoStepButton" data-step="10" aria-pressed="false">±10</button>
        <button type="button"
          class="tempoDial"
          id="tempoDial"
          data-step="10"
          data-degrees-per-step="36"
          aria-label="Change tempo by 10">
          <span class="tempoDialSide tempoDialMinus" aria-hidden="true">-</span>
          <span class="tempoDialIndicator" aria-hidden="true"></span>
          <span class="tempoDialLabel">10</span>
          <span class="tempoDialSide tempoDialPlus" aria-hidden="true">+</span>
        </button>
        <button type="button" id="tempoStepFine" class="tempoStepButton isActive" data-step="1" aria-pressed="true">±1</button>
      </div>
    </div>

    <div class="preferenceTitleWithTip">
      <div class="preferenceTitle">
        <span class="lang" data-lang="en">Beats (1–16)</span>
        <span class="lang" data-lang="ja">拍数（1〜16）</span>
      </div>
      <button
        type="button"
        class="chipButton tipButton"
        aria-label="Open tips"
        data-tip-target="beatsTipsDialog"
      >
        ?
      </button>
    </div>

    <div class="preferenceValue preferenceValueCentered">
      <input type="range" id="clickCountRange" min="1" max="16" step="1" value="4">
      <output id="clickCountValue" for="clickCountRange">4</output>
    </div>

    <div class="preferenceTitleWithTip">
      <div class="preferenceTitle">
        <span class="lang" data-lang="en">Tone</span>
        <span class="lang" data-lang="ja">音色</span>
      </div>
      <button
        type="button"
        class="chipButton tipButton"
        aria-label="Open tips"
        data-tip-target="toneTipsDialog"
      >
        ?
      </button>
    </div>

    <div class="preferenceValue preferenceValueCentered tonePreference">
      <div id="clickToneSelectors" class="toneSelectGroup" role="group" aria-label="Select click tone per beat"></div>
      <div class="toneLegend">
        <span class="lang" data-lang="en">High (A5) / Low (A4) / — (None)</span>
        <span class="lang" data-lang="ja">High (A5) / Low (A4) / —（無し）</span>
      </div>
    </div>

    <div class="preferenceTitleWithTip">
      <div class="preferenceTitle">
        <span class="lang" data-lang="en">Count-in (0–10)</span>
        <span class="lang" data-lang="ja">カウントイン（0〜10）</span>
      </div>
      <button
        type="button"
        class="chipButton tipButton"
        aria-label="Open tips"
        data-tip-target="countInTipsDialog"
      >
        ?
      </button>
    </div>

    <div class="preferenceValue preferenceValueCentered">
      <input type="range" id="countdownRange" min="0" max="10" step="1" value="4">
      <output id="countdownValue" for="countdownRange">4</output>
    </div>

  </main>

  <footer>
    <small>&copy; 2025 tatsu. All rights reserved.</small>
  </footer>

  <dialog id="tempoTipsDialog" class="tipsDialog" aria-labelledby="tempoTipsTitle">
    <div class="tipsDialogTitle" id="tempoTipsTitle">
      <span class="lang" data-lang="en">Tips</span>
      <span class="lang" data-lang="ja">ヒント</span>
    </div>
    <div class="tipsDialogBody">
      <span class="lang" data-lang="en">
        ・Set the tempo from 30 to 240 BPM.<br>
        ・Use the dial or the step buttons to change the value.<br>
        ・The setting is saved when you press "Done".<br>
      </span>
      <span class="lang" data-lang="ja">
        ・テンポは30〜240 BPMの範囲で設定します。<br>
        ・ダイヤルや刻み幅ボタンで値を変更できます。<br>
        ・設定は「Done」を押したときに保存されます。<br>
      </span>
    </div>
    <div class="tipsDialogActions">
      <button type="button" class="chipButton tipsDialogCloseButton" data-tip-close>
        <span class="lang" data-lang="en">Close</span>
        <span class="lang" data-lang="ja">閉じる</span>
      </button>
    </div>
  </dialog>

  <dialog id="beatsTipsDialog" class="tipsDialog" aria-labelledby="beatsTipsTitle">
    <div class="tipsDialogTitle" id="beatsTipsTitle">
      <span class="lang" data-lang="en">Tips</span>
      <span class="lang" data-lang="ja">ヒント</span>
    </div>
    <div class="tipsDialogBody">
      <span class="lang" data-lang="en">
        ・Set the number of beats from 1 to 16.<br>
        ・When you change the beat count, the tone selectors below are also updated.<br>
        ・The setting is saved when you press "Done".<br>
      </span>
      <span class="lang" data-lang="ja">
        ・拍数は1〜16の範囲で設定します。<br>
        ・拍数を変えると、下の音色選択もそれに合わせて更新されます。<br>
        ・設定は「Done」を押したときに保存されます。<br>
      </span>
    </div>
    <div class="tipsDialogActions">
      <button type="button" class="chipButton tipsDialogCloseButton" data-tip-close>
        <span class="lang" data-lang="en">Close</span>
        <span class="lang" data-lang="ja">閉じる</span>
      </button>
    </div>
  </dialog>

  <dialog id="toneTipsDialog" class="tipsDialog" aria-labelledby="toneTipsTitle">
    <div class="tipsDialogTitle" id="toneTipsTitle">
      <span class="lang" data-lang="en">Tips</span>
      <span class="lang" data-lang="ja">ヒント</span>
    </div>
    <div class="tipsDialogBody">
      <span class="lang" data-lang="en">
        ・You can set the click tone for each beat.<br>
        ・Choose H for High (A5), L for Low (A4), or — for None.<br>
        ・The setting is saved when you press "Done".<br>
      </span>
      <span class="lang" data-lang="ja">
        ・各拍ごとにクリック音の音色を設定できます。<br>
        ・H は High (A5)、L は Low (A4)、— は音なしです。<br>
        ・設定は「Done」を押したときに保存されます。<br>
      </span>
    </div>
    <div class="tipsDialogActions">
      <button type="button" class="chipButton tipsDialogCloseButton" data-tip-close>
        <span class="lang" data-lang="en">Close</span>
        <span class="lang" data-lang="ja">閉じる</span>
      </button>
    </div>
  </dialog>

  <dialog id="countInTipsDialog" class="tipsDialog" aria-labelledby="countInTipsTitle">
    <div class="tipsDialogTitle" id="countInTipsTitle">
      <span class="lang" data-lang="en">Tips</span>
      <span class="lang" data-lang="ja">ヒント</span>
    </div>
    <div class="tipsDialogBody">
      <span class="lang" data-lang="en">
        ・Set the count-in from 0 to 10 beats.<br>
        ・A larger value gives you more beats before playback starts.<br>
        ・The setting is saved when you press "Done".<br>
      </span>
      <span class="lang" data-lang="ja">
        ・カウントインは0〜10拍の範囲で設定します。<br>
        ・値を大きくすると、再生開始前の数えが長くなります。<br>
        ・設定は「Done」を押したときに保存されます。<br>
      </span>
    </div>
    <div class="tipsDialogActions">
      <button type="button" class="chipButton tipsDialogCloseButton" data-tip-close>
        <span class="lang" data-lang="en">Close</span>
        <span class="lang" data-lang="ja">閉じる</span>
      </button>
    </div>
  </dialog>

</body>
</html>
